        -:    0:Source:/home/vagrant/labs/lab-08-asio-client/sources/main.cpp
        -:    0:Graph:/home/vagrant/labs/lab-08-asio-client/_builds/gcc-7-cxx17-pic-Debug/CMakeFiles/client.dir/sources/main.cpp.gcno
        -:    0:Data:-
        -:    0:Runs:0
        -:    0:Programs:0
        -:    1:// Copyright 2018 Roman Vasyutin romanvas3008@gmail.com
        -:    2:
        -:    3:#include <client.hpp>
        -:    4:
        -:    5:boost::asio::ip::tcp::endpoint ep(
    #####:    6:       boost::asio::ip::address::from_string("127.0.0.1"), 8001);
        -:    7:
    #####:    8:void run_client(const std::string& client_name) {
    #####:    9:  talk_to_svr client(client_name);
        -:   10:  try {
    #####:   11:    client.connect(ep);
    #####:   12:    client.loop();
        -:   13:  }
    =====:   14:  catch(boost::system::system_error& err) {
    =====:   15:    boost::recursive_mutex::scoped_lock lk(mutex);
    =====:   16:    std::cout << "client terminated " << std::endl;
        -:   17:  }
    #####:   18:}
        -:   19:
    #####:   20:int main() {
    #####:   21:  std::srand(std::time(0));
    #####:   22:  boost::thread_group threads;
    #####:   23:  threads.create_thread(boost::bind(run_client, "Romka"));
    #####:   24:  threads.create_thread(boost::bind(run_client, "Asik"));
    #####:   25:  threads.create_thread(boost::bind(run_client, "Anton"));
    #####:   26:  threads.create_thread(boost::bind(run_client, "Robert"));
    #####:   27:  threads.join_all();
    #####:   28:  return 0;
    #####:   29:}
